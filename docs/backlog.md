# backlog

## 基础功能：短期记忆和长期记忆

- 短期记忆：使用滑动窗口实现，将最近的、tokens 综合在最大上下文内的 n 条对话拼接在 prompt 内
- 长期记忆：使用 rag 实现
- 记忆总结：cheatsheet
  - cheatsheet：使用 tokenizer 控制 token 数，如果超过 token 数则生成摘要，然后清空现有滑动窗口里面的对话，将 cheatsheet 拼接在 prompt 内
  - insight：每轮对话后用 llm 提取一次可复用的知识，每次发来对话的时候在数据库里用语义搜索查找一次，找出一定数量的可复用知识，拼接在 prompt 内
    - 知识重复：每次总结策略的时候会进行一次知识重复的查询
    - 知识失效：每次总结的时候，如果新旧知识结论冲突，新的会替代旧的
    - 语义搜索：用余弦相似度进行搜索

## 额外功能：